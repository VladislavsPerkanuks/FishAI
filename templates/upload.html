{% extends "head.html" %}
{% block body %}

    <form method="post" action="">
        {{ form.hidden_tag() }}
        <div class="text-center m-2 mt-4">
            <div class="container">
                <div class="form-floating mb-3 me-2">
                    {% if form.fish_name.errors %}
                        {{ form.fish_name(class="form-control h-75 is-invalid h5",placeholder="Fish name",
                             value=predictions[0][0]) }}
                        <div class="invalid-feedback">
                            {% for error in form.fish_name.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.fish_name(class="form-control h-75 title-input",placeholder="Fish name",
                            value=predictions[0][0]) }}
                    {% endif %}
                    {{ form.fish_name.label() }}
                </div>
            </div>
        </div>

        <img class="rounded mx-auto d-block m-1" src="data:image/jpeg;base64,{{ blob_photo }}"
             alt="{{ predictions[0][0] }}" style="max-width:90%;">

        <div class="container p-4 pt-1">
            <h4 class="mt-2">{{ predictions[0][0] }}</h4>
            <div class="progress">
                <div class="progress-bar progress-bar-striped bg-success" style="width: 0;"
                     id="prg1">{{ predictions[0][1] }}%
                </div>
            </div>
            <h4 class="mt-3">{{ predictions[1][0] }}</h4>
            <div class="progress">
                <div class="progress-bar progress-bar-striped bg-info" style="width: 0;"
                     id="prg2">{{ predictions[1][1] }}%
                </div>
            </div>
            <h4 class="mt-3">{{ predictions[2][0] }}</h4>
            <div class="progress">
                <div class="progress-bar progress-bar-striped bg-warning" style="width: 0;"
                     id="prg3">{{ predictions[2][1] }}%
                </div>
            </div>
        </div>

        <div class="container p-4 pt-0 mt-1">
            <div class="form-floating mb-2 me-2">
                {% if form.date.errors %}
                    {{ form.date(class="form-control is-invalid",placeholder="Date") }}
                    <div class="invalid-feedback">
                        {% for error in form.date.errors %}
                            {{ error }}
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.date(class="form-control",placeholder="Date",max=date) }}
                {% endif %}
                {{ form.date.label() }}
            </div>

            <div class="form-floating mb-2 me-2">
                {% if form.size.errors %}
                    {{ form.size(class="form-control is-invalid",placeholder="Size") }}
                    <div class="invalid-feedback">
                        {% for error in form.size.errors %}
                            {{ error }}
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.size(class="form-control",placeholder="Size") }}
                {% endif %}
                {{ form.size.label() }}
            </div>

            <div class="form-floating mb-2 me-2">
                {% if form.size.errors %}
                    {{ form.weight(class="form-control is-invalid",placeholder="Weight") }}
                    <div class="invalid-feedback">
                        {% for error in form.weight.errors %}
                            {{ error }}
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.weight(class="form-control",placeholder="Weight") }}
                {% endif %}
                {{ form.weight.label() }}
            </div>

            <div class="form-floating mb-2 me-2">
                {% if form.location.errors %}
                    {{ form.weight(class="form-control is-invalid",placeholder="Location") }}
                    <div class="invalid-feedback">
                        {% for error in form.location.errors %}
                            {{ error }}
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.location(class="form-control",placeholder="Location") }}
                {% endif %}
                {{ form.location.label() }}
            </div>
            <div class="text-center" style="margin-top:1rem">
                <button type="button" class="btn btn-danger" onclick="window.location.href='{{ url_for('profile') }}'"
                        style="margin-right: 0.75rem;">Cancel
                </button>
                {{ form.save(class="btn btn-primary") }}
            </div>
    </form>


    {#        <div class="container" style="margin-top:1.5rem;width:85%">#}
    {#            <div class="input-group mb-2 ">#}
    {#                <div class="input-group-prepend" style="width: 27%">#}
    {#                    <span class="input-group-text" id="basic-addon1">Date: </span>#}
    {#                </div>#}
    {#                <input type="date" class="form-control" name="date-inp" value="{{ date }}" min="2010-01-01"#}
    {#                       max="{{ date }}">#}
    {#            </div>#}

    {#            <div class="input-group mb-2">#}
    {#                <div class="input-group-prepend" style="width: 27%">#}
    {#                    <span class="input-group-text" id="basic-addon1">Size: </span>#}
    {#                </div>#}
    {#                <input type="number" step="any" class="form-control" placeholder="kg" aria-label="Username"#}
    {#                       aria-describedby="basic-addon1" name="size-inp">#}
    {#            </div>#}
    {##}
    {#            <div class="input-group mb-2 ">#}
    {#                <div class="input-group-prepend text-center" style="width: 27%">#}
    {#                    <span class="input-group-text" id="basic-addon1">Weight:    </span>#}
    {#                </div>#}
    {#                <input type="number" step="any" class="form-control" placeholder="m" aria-label="Username"#}
    {#                       aria-describedby="basic-addon1" name="weight-inp">#}
    {#            </div>#}
    {##}
    {#            <div class="input-group mb-2 ">#}
    {#                <div class="input-group-prepend" style="width: 27%">#}
    {#                    <span class="input-group-text" id="basic-addon1">Location: </span>#}
    {#                </div>#}
    {#                <input type="text" class="form-control" placeholder="Ķīšezers" aria-label="Username"#}
    {#                       aria-describedby="basic-addon1" name="locat-inp">#}
    {#            </div>#}
    {#        </div>#}
    {#        <input type="text" name="ai_predict" style="display: none" value="{{ predictions }}"/>#}
    {#        <input type="text" name="blob-file" style="display: none" value="{{ blob_photo }}"/>#}
    {#        <div class="text-center" style="margin-top:1rem">#}
    {#            <button type="button" class="btn btn-danger" onclick="window.location.href='{{ url_for('profile') }}'"#}
    {#                    style="margin-right: 0.75rem;">Cancel#}
    {#            </button>#}
    {#            <button type="submit" class="btn btn-primary">Save</button>#}
    {#        </div>#}
    {##}
    {##}
    {#    </form>#}
    <script>

        // Set the width to animate the progress bar
        // Along with time duration in milliseconds
        $("#prg1").animate({
            width: "{{ predictions[0][1] }}%",
        }, 1500);

        $("#prg2").animate({
            width: "{{ predictions[1][1] }}%",
        }, 1500);

        $("#prg3").animate({
            width: "{{ predictions[2][1] }}%",
        }, 1500);
    </script>


{% endblock %}